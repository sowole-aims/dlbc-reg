<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Youth Easter Retreat 2025 Registration</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      background: #ffffff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 600px;
    }
    .header {
      display: flex;
      align-items: flex-start;
      margin-bottom: 10px;
    }
    .logo {
      width: 70px;
      margin-right: 15px;
    }
    .titles {
      flex: 1;
    }
    .titles h1 {
      font-size: 18px;
      margin: 0;
      color: #2c3e50;
    }
    .titles h2 {
      font-size: 15px;
      margin: 4px 0;
      color: #34495e;
    }
    .theme {
      font-size: 13px;
      font-style: italic;
      color: #555;
      margin-bottom: 15px;
    }
    form {
      display: flex;
      flex-direction: column;
    }
    input, select {
      padding: 10px;
      margin: 6px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }
    button {
      padding: 12px;
      background-color: #007b3d;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 12px;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="image/dlbc_logo.jpg" alt="Church Logo" class="logo">
      <div class="titles">
        <h1>Deeper Life Bible Church, Abeokuta Region</h1>
        <h2>Youth Easter Retreat 2025 Registration Form</h2>
      </div>
    </div>
    <div class="theme">
      Theme: <strong>EXPERIENCING THE POWER OF HIS RESURRECTION</strong>
    </div>

    <form id="regForm">
      <input type="text" name="surname" placeholder="Surname" required />
      <input type="text" name="otherNames" placeholder="Other Names" required />

      <select name="gender" required>
        <option value="">Select Gender</option>
        <option value="Female">Female</option>
        <option value="Male">Male</option>
      </select>

      <select name="ageGroup" required>
        <option value="">Select Age Group</option>
        <option value="Below 13">Below 13</option>
        <option value="13-15">13-15</option>
        <option value="16-18">16-18</option>
        <option value="Above 18">Above 18</option>
      </select>

      <input type="text" name="address" placeholder="Residential Address" required />
      <input type="text" name="school" placeholder="School" required />
      <input type="text" name="class" placeholder="Class (e.g. SS1, JSS2)" required />

      <label for="membership">Membership Status</label>
      <select name="membership" id="membership" required>
        <option value="">-- Select --</option>
        <option value="Worker">Worker</option>
        <option value="Member">Member</option>
        <option value="Invitee">Invitee</option>
      </select>

      <input type="text" name="groupOfGroups" placeholder="Group of Groups" required />
      <input type="text" name="group" placeholder="Group" required />
      <input type="text" name="district" placeholder="District" required />
      <input type="tel" name="mobile" placeholder="Mobile Number (or type 'None')" />

      <button type="submit" id="submitBtn">Submit</button>
    </form>
  </div>

  <script>
    document.getElementById("regForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const form = e.target;
      const submitBtn = document.getElementById("submitBtn");
      submitBtn.disabled = true;
      submitBtn.textContent = "Submitting...";

      const data = {
        surname: form.surname.value,
        otherNames: form.otherNames.value,
        gender: form.gender.value,
        ageGroup: form.ageGroup.value,
        address: form.address.value,
        school: form.school.value,
        class: form.class.value,
        membership: form.membership.value,
        groupOfGroups: form.groupOfGroups.value,
        group: form.group.value,
        district: form.district.value,
        mobile: form.mobile.value.trim() || "None"
      };

      fetch("https://script.google.com/macros/s/AKfycbxEnHhcgyFPEv7xSP-W5v5WH8dRbptG6KQVrjx0rZ75UuJ8IopfGw8N9bCrbTYRGlypWg/exec", {
        method: "POST",
        mode: "no-cors",  // Important for CORS with Google Apps Script
        body: JSON.stringify(data),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(() => {
        window.location.href = `success.html?surname=${encodeURIComponent(data.surname)}&otherNames=${encodeURIComponent(data.otherNames)}`;
      })
      .catch((err) => {
        alert("Error occurred while submitting registration.");
        console.error(err);
        submitBtn.disabled = false;
        submitBtn.textContent = "Submit";
      });
    });
  </script>
</body>
</html>
